"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return o(t)||n(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}}function o(t){if(Array.isArray(t))return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.version=v,exports.hydrate=g,exports.resolveAll=y,exports.setState=_,exports.getState=A,exports.textNode=b,exports.markup=T,exports.m=m,exports.mount=E,exports.renderToString=I,exports.update=S,exports.getRouteSegments=R,exports.getRouteParams=w,exports.getRoute=C,exports.addRoute=x,exports.removeRoute=N,exports.route=H,exports.setDetectionStrategy=F,exports.detectChanges=j,exports.isDetectorAttached=Y,exports.detachDetector=B,exports.wrapWithChangeDetector=P;var a="undefined"!=typeof window,i=a?window:global;a||(i.setTimeout=function(){},i.setInterval=function(){},i.location={},i.location.href="",i.fetch=function(){},i.XMLHttpRequest={},i.XMLHttpRequest.prototype={},i.XMLHttpRequest.prototype.send=function(){}),i.s=function(){};var u=i.setTimeout,c=i.setInterval;Object.defineProperty(s,"DETACHED_SET_TIMEOUT",{value:u.bind(i)}),Object.defineProperty(s,"DETACHED_SET_INTERVAL",{value:c.bind(i)}),s._state={},s._destroyFuncMap=new Map,s._updateMap=new Map,s._afterInitArr=[];var l=function r(n){for(var o=n.tagName,a=n.attrs,i=n.children,u=document.createElement(o),c=0,l=Object.entries(a);c<l.length;c++){var f=e(l[c],2),d=f[0],p=f[1];"function"===t(p)?(u[d]=p,s._changeDetector.changeDetectionStrategy===s.CHANGE_STRATEGY_AUTOMATIC&&G(d,u)):u.setAttribute(d,p)}var h=!0,v=!1,g=void 0;try{for(var y,_=i[Symbol.iterator]();!(h=(y=_.next()).done);h=!0){var A=y.value;if("string"==typeof A)u.append(A);else{if(A.view){if(A.slOnInit&&A.slOnInit(),A.slOnDestroy){var b=s._destroyFuncMap.get(s._router.mountRoute);b||(b=[]),b.push(A.slOnDestroy.bind(A)),s._destroyFuncMap.set(s._router.mountRoute,b)}A.slAfterInit&&s._afterInitArr.push(A.slAfterInit.bind(A)),A=A.view.bind(A)()}u.appendChild(r(A))}}}catch(t){v=!0,g=t}finally{try{h||null==_.return||_.return()}finally{if(v)throw g}}return u},f=function(r,n,o){var a=!0,i=!1,u=void 0;try{for(var c,l=n[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value,d=o[f.name];d?d.length===f.nodeValue.length&&d===f.nodeValue&&delete o[f.name]:r.removeAttribute(f.nodeName)}}catch(t){i=!0,u=t}finally{try{a||null==l.return||l.return()}finally{if(i)throw u}}for(var p=0,h=Object.entries(o);p<h.length;p++){var v=e(h[p],2),g=v[0],y=v[1];"function"===t(y)?(r[g]=y,s._changeDetector.changeDetectionStrategy===s.CHANGE_STRATEGY_AUTOMATIC&&G(g,r)):r.setAttribute(g,y)}},d=function(t,e,r){for(var n=e.length,o=0,a=e.length-1;a>=0;--a)p(e[a],r[a]),o++;for(;e.length>n;)e[e.length-1].remove();var i=!0,u=!1,c=void 0;try{for(var f,d=r.slice(n)[Symbol.iterator]();!(i=(f=d.next()).done);i=!0){var h=f.value;if("string"==typeof h)t.childNodes[o]?t.childNodes[o].textContent!==h&&(t.childNodes[o].textContent=h):t.append(h);else if("string"==typeof h)t.append(h);else{if(h.view){if(h.slOnInit&&h.slOnInit(),h.slOnDestroy){var v=s._destroyFuncMap.get(s._router.mountRoute);v||(v=[]),v.push(h.slOnDestroy.bind(h)),s._destroyFuncMap.set(s._router.mountRoute,v)}h.slAfterInit&&s._afterInitArr.push(h.slAfterInit.bind(h)),h=h.view.bind(h)()}t.appendChild(l(h))}o++}}catch(t){u=!0,c=t}finally{try{i||null==d.return||d.return()}finally{if(u)throw c}}for(;e.length>r.length;)e[e.length-1].remove()},p=function(t,e){if(e&&e.view){if(e.slOnInit&&e.slOnInit(),e.slOnDestroy){var r=s._destroyFuncMap.get(s._router.mountRoute);r||(r=[]),r.push(e.slOnDestroy.bind(e)),s._destroyFuncMap.set(s._router.mountRoute,r)}e.slAfterInit&&s._afterInitArr.push(e.slAfterInit.bind(e)),e=e.view.bind(e)()}if(e){if(t&&t.tagName!==e.tagName){if(!e.tagName)return t.replaceWith(e),void(t=e);var n=document.createElement(e.tagName);t.parentNode.insertBefore(n,t),t=n}if("string"!=typeof e){switch(e.attrs.sldirective){case"useexsting":return;case"onlychildren":return void d(t,t.childNodes,e.children);case"onlyself":return void f(t,t.attributes,e.attrs);case"trustchildren":f(t,t.attributes,e.attrs);var o="";return e.children.forEach((function(t){o+=t})),void(t.innerHTML!==o&&(t.innerHTML=o))}f(t,t.attributes,e.attrs),d(t,t.childNodes,e.children)}else t.textContent!==e&&(t.textContent=e)}else t&&t.remove()},h=function(t,e,r){s._afterInitArr=[],e.slOnInit&&e.slOnInit();var n=e.view.bind(e)();if(n.view&&(n=n.view.bind(e)()),!n.attrs||t&&t.id!==n.attrs.id){var o=n.attrs?n.attrs.id:"null";console.error("Mounted component root element changed from "+t.id+" to "+o)}return p(t,n),r&&s._updateMap.set(t.id,e),e.slAfterInit&&(e.slAfterInit(),U()),s._afterInitArr.forEach((function(t){t()})),t};function v(){return"12.0.0"}function g(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=document.getElementById(t).getAttribute("slssrclass"),n=i[r];return!n&&this&&(n=this[r]),E(t,new n,e)}function y(t){return Promise.all(t.map((function(t){return t.then((function(t){return{result:t,status:"fulfilled",error:null}}),(function(t){return{result:null,error:t,status:"rejected"}}))})))}function _(t){s._state=t}function A(){return s._state}function b(t){return String(t)}function T(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.attrs,n=void 0===r?{}:r,o=e.children,a=void 0===o?[]:o;return{tagName:t=t.toUpperCase(),attrs:n,children:a}}function m(){return T(arguments[0],arguments[1])}function E(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];s._router.mountRoute=t;var n=document.getElementById(t);if(null!==n)return h(n,e,r);console.error("ID "+t+" does not exist in DOM.")}var D=function r(n){for(var o=n.tagName,a=n.attrs,i=n.children,s="<"+(o=o.toLowerCase()),u=0,c=Object.entries(a);u<c.length;u++){var l=e(c[u],2),f=l[0],d=l[1];s+="function"===t(d)?" "+f+'=""':" "+f+'="'+d+'"'}s+=">";var p=!0,h=!1,v=void 0;try{for(var g,y=i[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var _=g.value;_.view?s+=r(_=_.view.bind(_)()):s+="string"==typeof _?_:r(_)}}catch(t){h=!0,v=t}finally{try{p||null==y.return||y.return()}finally{if(h)throw v}}return s+"</"+o+">"};function I(t){for(var e=t.view.bind(t)();e.view;)e=e.view.bind(e)();return D(e)}function S(t,e){var r=t;if(t=document.getElementById(t)){var n=e.view.bind(e)();p(t,n)}else console.error("ID "+r+" not mounted in DOM; attachDetector likely needs to be called.");s._afterInitArr.forEach((function(t){t()}))}var M=i.onpopstate;i.onpopstate=function(t){i.location.hash&&s._router.lastHash!==i.location.hash.substring(1)&&(M&&M(t),H(C()))},s._router={segmentArr:[],routeList:[],params:null,lastHash:!1,currentRoute:null,mountRoute:""},Object.seal(s._router);var O=function(){var t=i.location.href.split("#")[1];if(t){var e=t.split("/");e.forEach((function(t,e){s._router.segmentArr[e]=t})),s._router.segmentArr.splice(e.length,s._router.segmentArr.length)}else s._router.segmentArr.splice(0,s._router.segmentArr.length)};function R(){return s._router.segmentArr}function w(){return s._router.params}function C(){return i.location.href.split("#")[1]}function x(t,e){s._router.routeList.push([new RegExp("^"+t.replace(/:[^\/]+/g,"([^\\/]+)")+"$"),e])}function N(t){for(var r=new RegExp("^"+t.replace(/:[^\/]+/g,"([^\\/]+)")+"$"),n=String(r),o=0;o<s._router.routeList.length;++o){var a=e(s._router.routeList[o],2),i=a[0];a[1];if(String(i)===n){s._router.routeList.splice(o,1);break}}}function H(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(s._router.params=r,!s._router.currentRoute||!s._router.currentRoute.onCanDeactivate||s._router.currentRoute.onCanDeactivate(t)){var o=null,a=!0,u=!1,c=void 0;try{for(var l,f=s._router.routeList[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var d=e(l.value,2),p=d[0],v=d[1];if(p.test(t)){if(v.onActivationCheck&&!v.onActivationCheck(t))return v.onActivationFail&&(o=H(v.onActivationFail.route,v.onActivationFail.params,"boolean"!=typeof v.onActivationFail.attachDetector||v.onActivationFail.attachDetector)),void(t=void 0);v.onBeforeRoute&&v.onBeforeRoute();var g=s._destroyFuncMap.get(C());g&&(g.forEach((function(t){t()})),s._destroyFuncMap.set(C(),[])),s._router.lastHash=t,i.location.hash=t,O(),s._router.currentRoute=v;var y=document.getElementById(v.root);v.component&&(v.component.slOnDestroy&&s._destroyFuncMap.set(t,[v.component.slOnDestroy.bind(v.component)]),s._router.mountRoute=t,h(y,v.component,n),o=v.component);break}}}catch(t){u=!0,c=t}finally{try{a||null==f.return||f.return()}finally{if(u)throw c}}return s._changeDetector.changeDetectionStrategy===s.CHANGE_STRATEGY_AUTOMATIC&&U(),o}}O(),s.CHANGE_STRATEGY_AUTOMATIC=100,s.CHANGE_STRATEGY_MANUAL=200,s.CHANGE_DETECTOR_DETACHED=!1,s.CHANGE_DETECTOR_ATTACHED=!0,s._changeStrategies=[s.CHANGE_STRATEGY_AUTOMATIC,s.CHANGE_STRATEGY_MANUAL],s._changeDetector={lastUpdateDate:new Date,changeDetectionStrategy:s.CHANGE_STRATEGY_AUTOMATIC},Object.seal(s._changeDetector),Object.freeze(s._changeStrategies);var G=function(t,e){if(e[t]){var r=e[t];e[t]=function(){var t=r.apply(this,[].slice.call(arguments));return U(),t}}},L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?S(t,s._updateMap.get(t)):s._updateMap.forEach((function(t,e){S(e,t)}))},U=function(){s._changeDetector.changeDetectionStrategy===s.CHANGE_STRATEGY_AUTOMATIC&&(new Date-s._changeDetector.lastUpdateDate>17?L():s._debouncedPerformUpdates(),s._changeDetector.lastUpdateDate=new Date)};function F(t){s._changeStrategies.forEach((function(e){e===t&&(s._changeDetector.changeDetectionStrategy=t)}))}function j(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;L(t)}function Y(t){return s._updateMap.has(t)}function B(t){s._updateMap.delete(t)}function P(t){return function(){var e=t.apply(this,[].slice.call(arguments));return U(),e}}s._debouncedPerformUpdates=function(t,e){var r;return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var a=this;clearTimeout(r),r=s.DETACHED_SET_TIMEOUT((function(){return t.apply(a,n)}),17)}}(L);var k=i.XMLHttpRequest.prototype.send;function q(){if(this._onreadystatechange){var t=this._onreadystatechange.apply(this,arguments);return U(),t}}i.XMLHttpRequest.prototype.send=function(t){return this.onreadystatechange&&(this._onreadystatechange=this.onreadystatechange),this.onreadystatechange=q,k.apply(this,arguments)};var X=i.fetch;i.fetch=function(){var t=X.apply(this,arguments);return U(),t},G("setTimeout",i),G("setInterval",i);