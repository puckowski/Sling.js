"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return o(t)||n(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,o=!1,s=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{n||null==i.return||i.return()}finally{if(o)throw s}}return r}}function o(t){if(Array.isArray(t))return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderElement=h,exports.version=R,exports.hydrate=N,exports.resolveAll=F,exports.setState=H,exports.getState=j,exports.textNode=G,exports.markup=L,exports.m=m,exports.mount=U,exports.renderToString=k,exports.update=P,exports.getRouteSegments=q,exports.getRouteParams=X,exports.getRoute=K,exports.addRoute=V,exports.removeRoute=W,exports.route=$,exports.setDetectionStrategy=rt,exports.detectChanges=nt,exports.isDetectorAttached=ot,exports.detachDetector=st,exports.wrapWithChangeDetector=at;var a="undefined"!=typeof window,i=a?window:global;a||(i.setTimeout=function(){},i.setInterval=function(){},i.location={},i.location.href="",i.fetch=function(){},i.XMLHttpRequest={},i.XMLHttpRequest.prototype={},i.XMLHttpRequest.prototype.send=function(){}),i.s=function(){};var l=i.setTimeout,u=i.setInterval;Object.defineProperty(s,"DETACHED_SET_TIMEOUT",{value:l.bind(i)}),Object.defineProperty(s,"DETACHED_SET_INTERVAL",{value:u.bind(i)}),s._state={},s._destroyFuncMap=new Map,s._updateMap=new Map,s._afterInitArr=[],s._destroyNodeMap=new Map,s._structureForMap=new Map;var c=function r(n,o){for(var a=n.tagName,i=n.attrs,l=n.children,u=n.model,c="<"+(a=a.toLowerCase()),f=null,d=0,h=Object.entries(i);d<h.length;d++){var v=e(h[d],2),p=v[0],y=v[1];if(c+="function"===t(y)?" "+p+'=""':" "+p+'="'+y+'"',"slfor"===p){var g=y.split(":");if(g.length>=4){s._structureForMap.has(g[0])||s._structureForMap.set(g[0],z(null,u[g[2]]));var _=s._structureForMap.get(g[0]);f=J.bind(u,_,u[g[1]],u[g[3]])()}}else if("slfornamed"===p){var b=y.split(":");if(b.length>=4){for(var A=void 0,D=void 0,O=void 0,I=void 0,M=0,x=Object.keys(u);M<x.length;M++){(I=u[x[M]]).slfor===b[2]?A=I:I.slfor===b[1]?O=I:I.slfor===b[3]&&(D=I)}var E=!0,T=!1,S=void 0;try{for(var C,R=w(u)[Symbol.iterator]();!(E=(C=R.next()).done);E=!0){(I=u[C.value]).slfor===b[2]?A=I:I.slfor===b[1]?O=I:I.slfor===b[3]&&(D=I)}}catch(t){T=!0,S=t}finally{try{E||null==R.return||R.return()}finally{if(T)throw S}}O=O.bind(u),s._structureForMap.has(b[0])||s._structureForMap.set(b[0],z(null,A));var N=s._structureForMap.get(b[0]);f=J.bind(u,N,O,D)()}}}c+=">",null!==f&&f.forEach((function(t){c+=r(t,o)}));var F=!0,H=!1,j=void 0;try{for(var G,L=l[Symbol.iterator]();!(F=(G=L.next()).done);F=!0){var U=G.value;U.view?(U.slOnInit&&(U.slOnInit(),o.push(U)),U=U.view.bind(U)(),c+=r(U,o)):c+="string"==typeof U?U:r(U,o)}}catch(t){H=!0,j=t}finally{try{F||null==L.return||L.return()}finally{if(H)throw j}}return c+="</"+a+">"},f=function(t,e){var r,n=[];for(n.push(t);n.length>0;)if((r=n.shift()).attrs&&(r.attrs.slfor||r.attrs.slfornamed)&&(r.model=e),r.children)for(var o=r.children.length-1;o>=0;--o)n.push(r.children[o])},d=function(t){var e,r,n=[];for(n.push(t);n.length>0;)if((e=n.shift()).hasAttribute("slfor")?(r=(r=e.getAttribute("slfor")).split(":")).length>0&&s._structureForMap.delete(r[0]):e.hasAttribute("slfornamed")&&(r=(r=e.getAttribute("slfornamed")).split(":")).length>0&&s._structureForMap.delete(r[0]),e.children)for(var o=e.children.length-1;o>=0;--o)n.push(e.children[o])};function h(r){for(var n=r.tagName,o=r.attrs,a=r.children,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=document.createElement(n),u=0,c=Object.entries(o);u<c.length;u++){var f=e(c[u],2),d=f[0],v=f[1];"function"===t(v)?(l[d]=v,s._changeDetector.changeDetectionStrategy===s.CHANGE_STRATEGY_AUTOMATIC&&Z(d,l)):l.setAttribute(d,v)}var p=!0,_=!1,b=void 0;try{for(var A,D=a[Symbol.iterator]();!(p=(A=D.next()).done);p=!0){var O=A.value;"string"==typeof O?l.append(O):O.view?i?y(O,l):g(O,l):l.appendChild(h(O))}}catch(t){_=!0,b=t}finally{try{p||null==D.return||D.return()}finally{if(_)throw b}}return l}var v=function r(n){for(var o=n.tagName,a=n.attrs,i=n.children,l=document.createElement(o),u=0,c=Object.entries(a);u<c.length;u++){var f=e(c[u],2),d=f[0],h=f[1];"function"===t(h)?(l[d]=h,s._changeDetector.changeDetectionStrategy===s.CHANGE_STRATEGY_AUTOMATIC&&Z(d,l)):l.setAttribute(d,h)}var v=!0,p=!1,y=void 0;try{for(var _,b=i[Symbol.iterator]();!(v=(_=b.next()).done);v=!0){var A=_.value;"string"==typeof A?l.append(A):A.view?g(A,l):l.appendChild(r(A))}}catch(t){p=!0,y=t}finally{try{v||null==b.return||b.return()}finally{if(p)throw y}}return l},p=function(t,e){for(var r in t.slKeyList=[],t.slNamespace={},e)t.slNamespace[r]=e[r],t.slKeyList.push(r)},y=function(t,e){t=b(t,!0,!0,!0).view;var r=v(t);e.appendChild(r)},g=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t,o=b(t,!0,!0,!0);t=o.view,o.afterInit&&s._afterInitArr.push(o.afterInit);var a=v(t);_(a,o.destroyIndex,o.onDestroy),A(a),e.appendChild(a),p(a,n),r&&S(a,t,o.model)},_=function(t,e,r){t.slOnDestroy=!0,t.slAfterInit=!0,t.slOnInit=!0,t.slOnDestroyIndex=e,t.slOnDestroyFn=r},b=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(r&&t.slOnInit&&t.slOnInit(),o&&o.slKeyList){var a=!0,i=!1,l=void 0;try{for(var u,c=o.slKeyList[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;void 0===t[d]?t[d]=o.slNamespace[d]:o.slNamespace[d]=t[d]}}catch(t){i=!0,l=t}finally{try{a||null==c.return||c.return()}finally{if(i)throw l}}}var h=null;if(e&&t.slOnDestroy){var v=s._destroyFuncMap.get(s._router.mountRoute);v||(v=[]),v.push(t.slOnDestroy.bind(t)),s._destroyFuncMap.set(s._router.mountRoute,v),h=v.length-1}var p=t.view.bind(t)();return f(p,t),{view:p,afterInit:t.slAfterInit?t.slAfterInit.bind(t):null,onDestroy:e&&!n||!t.slOnDestroy?null:t.slOnDestroy.bind(t),onInit:!r&&t.slOnInit?t.slOnInit:null,destroyIndex:h,model:t}},A=function(t){if(t&&null!==t.slOnDestroyIndex&&void 0!==t.slOnDestroyIndex){var e=s._destroyNodeMap.get(s._router.mountRoute);e||(e=[]),e.find((function(e){return e.slOnDestroyIndex===t.slOnDestroyIndex}))||e.push(t),s._destroyNodeMap.set(s._router.mountRoute,e)}},D=function(t){if(t&&t.slOnDestroy){var e=s._destroyFuncMap.get(s._router.mountRoute);e||(e=[]),e.splice(t.slOnDestroyIndex,1),s._destroyFuncMap.set(s._router.mountRoute,e);var r=s._destroyNodeMap.get(s._router.mountRoute);r||(r=[]),r.forEach((function(e){e.slOnDestroyIndex>t.slOnDestroyIndex&&e.slOnDestroyIndex--})),r=r.filter((function(e){return e.slOnDestroyIndex!==t.slOnDestroyIndex})),s._destroyNodeMap.set(s._router.mountRoute,r)}},O=function t(e){if(e&&e.children&&e.children.length>0){var r=!0,n=!1,o=void 0;try{for(var s,a=e.children[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){t(s.value)}}catch(t){n=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}e.slOnDestroyFn&&(e.slOnDestroyFn(),e.slOnDestroyFn=null)}else e.slOnDestroyFn&&(e.slOnDestroyFn(),e.slOnDestroyFn=null)},I=function(t,e){t.slOnDestroy=!0;var r=s._destroyFuncMap.get(s._router.mountRoute);r||(r=[]),r.push(e),s._destroyFuncMap.set(s._router.mountRoute,r),t.slOnDestroyIndex=r.length-1,t.slOnDestroyFn=e,A(t)},M=function(r,n,o){var a=!0,i=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var f=u.value,d=o[f.name];d?d.length===f.nodeValue.length&&d===f.nodeValue&&delete o[f.name]:r.removeAttribute(f.nodeName)}}catch(t){i=!0,l=t}finally{try{a||null==c.return||c.return()}finally{if(i)throw l}}for(var h=0,v=Object.entries(o);h<v.length;h++){var p=e(v[h],2),y=p[0],g=p[1];"function"===t(g)?(r[y]=g,s._changeDetector.changeDetectionStrategy===s.CHANGE_STRATEGY_AUTOMATIC&&Z(y,r)):r.setAttribute(y,g)}},x=function(t,e,r){for(var n=e.length,o=0,a=e.length-1;a>=0;--a){var i=null;if(r[a]&&r[a].view){var l=b(r[a],!1,!1,!1,e[a]);r[a]=l.view,l.onInit&&r[a]&&!r[a].slOnInit&&l.onInit(),l.afterInit&&r[a]&&!r[a].slAfterInit&&(r[a].slAfterInit=!0,s._afterInitArr.push(l.afterInit)),l.onDestroy&&r[a]&&!r[a].slOnDestroy&&I(r[a],l.onDestroy),p(e[a],l.model),i=l.model}S(e[a],r[a],i),o++}for(var u=e.length;u>n;)D(e[u-1]),O(e[u-1]),d(e[e.length-1]),E(e[u-1]),u--;var c=!0,f=!1,h=void 0;try{for(var y,_=r.slice(n)[Symbol.iterator]();!(c=(y=_.next()).done);c=!0){var A=y.value;if("string"==typeof A)t.childNodes[o]?t.childNodes[o].textContent!==A&&(t.childNodes[o].textContent=A):t.append(A);else if("string"==typeof A)t.append(A);else if(A.view)g(A,t,!0);else{var M=v(A);t.appendChild(M),S(M,A)}o++}}catch(t){f=!0,h=t}finally{try{c||null==_.return||_.return()}finally{if(f)throw h}}for(u=e.length;u>r.length;)D(e[u-1]),O(e[u-1]),d(e[u-1]),E(e[u-1]),u--},E=function(t){if(void 0===t.attributes.slanimatedestroy||""===t.getAttribute("slanimatedestroy")||t.slAnimateDestroy)t.slAnimateDestroy||t.remove();else{var e=t.onanimationend;t.onanimationend=function(){var r=void 0;return e&&(r=e.apply(this,[].slice.call(arguments))),t.remove(),r},t.classList.add(t.getAttribute("slanimatedestroy")),t.slAnimateDestroy=!0}},T=function t(e){return e&&e!==Object.prototype&&Object.getOwnPropertyNames(e).filter((function(t){return function(t,e){return(Object.getOwnPropertyDescriptor(t,e)||{}).get}(e,t)||function(t,e){return"function"==typeof t[e]}(e,t)})).concat(t(Object.getPrototypeOf(e))||[])},w=function(t){return function(t){return Array.from(new Set(T(t)))}(t).filter((function(t){return"constructor"!==t&&!~t.indexOf("__")}))},S=function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&e.view){var r=b(e,!1,!1,!1,t);e=r.view,r.onInit&&t&&!t.slOnInit&&r.onInit(),r.afterInit&&t&&!t.slAfterInit&&(t.slAfterInit=!0,s._afterInitArr.push(r.afterInit)),r.onDestroy&&t&&!t.slOnDestroy&&I(t,r.onDestroy)}if(e){if(t&&t.tagName!==e.tagName){if(!e.tagName)return D(t),O(t),t.replaceWith(e),void(t=e);var n=document.createElement(e.tagName);t.parentNode.insertBefore(n,t),t=n}if("string"!=typeof e){switch(e.attrs.sldirective){case"useexsting":return;case"onlychildren":return void x(t,t.childNodes,e.children);case"onlyself":return void M(t,t.attributes,e.attrs);case"trustchildren":M(t,t.attributes,e.attrs);var o="";return e.children.forEach((function(t){o+=t})),void(t.innerHTML!==o&&(t.innerHTML=o))}if(e.attrs.slfor){var a=e.attrs.slfor.split(":");if(a.length>=4){if(!s._structureForMap.has(a[0])){var i=z(t,e.model[a[2]]);if(s._structureForMap.set(a[0],i),t.children.length>0){for(var l=Object.create(null),u=0;u<t.children.length;++u)l[u]=t.children[u];i.map=l}}var c=s._structureForMap.get(a[0]);Q.bind(e.model,c,e.model[a[1]],e.model[a[3]])()}M(t,t.attributes,e.attrs)}else if(e.attrs.slfornamed){var f=e.attrs.slfornamed.split(":");if(f.length>=4){for(var h,v,p,y,g=0,_=Object.keys(e.model);g<_.length;g++){var A=_[g];(y=e.model[A]).slfor===f[2]?h=y:y.slfor===f[1]?p=y:y.slfor===f[3]&&(v=y)}var T=!0,S=!1,C=void 0;try{for(var R,N=w(e.model)[Symbol.iterator]();!(T=(R=N.next()).done);T=!0){var F=R.value;(y=e.model[F]).slfor===f[2]?h=y:y.slfor===f[1]?p=y:y.slfor===f[3]&&(v=y)}}catch(t){S=!0,C=t}finally{try{T||null==N.return||N.return()}finally{if(S)throw C}}if(p=p.bind(e.model),!s._structureForMap.has(f[0])){var H=z(t,h);if(s._structureForMap.set(f[0],H),t.children.length>0){for(var j=Object.create(null),G=0;G<t.children.length;++G)j[G]=t.children[G];H.map=j}}var L=s._structureForMap.get(f[0]);Q.bind(e.model,L,p,v)()}M(t,t.attributes,e.attrs)}else M(t,t.attributes,e.attrs),x(t,t.childNodes,e.children)}else t.textContent!==e&&(t.textContent=e)}else t&&(D(t),O(t),d(t),E(t))},C=function(t,e,r){s._afterInitArr=[],e.slOnInit&&e.slOnInit();var n=e.view.bind(e)();if(f(n,e),n.view&&(n=n.view.bind(e)(),f(n,e)),!n.attrs||t&&t.id!==n.attrs.id){var o=n.attrs?n.attrs.id:"null";console.error("Mounted component root element changed from "+t.id+" to "+o)}return S(t,n,e),r&&s._updateMap.set(t.id,e),e.slOnDestroy&&I(t,e.slOnDestroy.bind(e)),e.slAfterInit&&(e.slAfterInit(),et()),s._afterInitArr.forEach((function(t){t()})),t};function R(){return"14.1.0"}function N(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=document.getElementById(t).getAttribute("slssrclass"),n=i[r];return!n&&this&&(n=this[r]),U(t,new n,e)}function F(t){return Promise.all(t.map((function(t){return t.then((function(t){return{result:t,status:"fulfilled",error:null}}),(function(t){return{result:null,error:t,status:"rejected"}}))})))}function H(t){s._state=t}function j(){return s._state}function G(t){return String(t)}function L(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.attrs,n=void 0===r?{}:r,o=e.children,s=void 0===o?[]:o;return{tagName:t=t.toUpperCase(),attrs:n,children:s}}function m(){return L(arguments[0],arguments[1])}function U(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];s._router.mountRoute=t;var n=document.getElementById(t);if(null!==n)return C(n,e,r);console.error("ID "+t+" does not exist in DOM.")}function k(t){var e=[],r=new Set,n=!0,o=!1,a=void 0;try{for(var i,l=s._structureForMap.keys()[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var u=i.value;r.add(u)}}catch(t){o=!0,a=t}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}t.slOnInit&&(t.slOnInit(),e.push(t));for(var d=t.view.bind(t)(),h=t;d.view;)d.slOnInit&&(d.slOnInit(),s,e.push(d)),h=d,d=d.view.bind(d)();f(d,h);var v=c(d,e);e.forEach((function(t){t.slOnDestroy&&t.slOnDestroy.bind(t)()}));var p=!0,y=!1,g=void 0;try{for(var _,b=s._structureForMap.keys()[Symbol.iterator]();!(p=(_=b.next()).done);p=!0){var A=_.value;r.has(A)||s._structureForMap.delete(A)}}catch(t){y=!0,g=t}finally{try{p||null==b.return||b.return()}finally{if(y)throw g}}return v}function P(t,e){var r=t;if(t=document.getElementById(t),s._afterInitArr=[],t){var n=e.view.bind(e)();f(n,e),S(t,n,e)}else console.error("ID "+r+" not mounted in DOM; attachDetector likely needs to be called.");s._afterInitArr.forEach((function(t){t()}))}var Y=i.onpopstate;i.onpopstate=function(t){i.location.hash&&s._router.lastHash!==i.location.hash.substring(1)&&(Y&&Y(t),$(K()))},s._router={segmentArr:[],routeList:[],params:null,lastHash:!1,currentRoute:null,mountRoute:""},Object.seal(s._router);var B=function(){var t=i.location.href.split("#")[1];if(t){var e=t.split("/");e.forEach((function(t,e){s._router.segmentArr[e]=t})),s._router.segmentArr.splice(e.length,s._router.segmentArr.length)}else s._router.segmentArr.splice(0,s._router.segmentArr.length)};function q(){return s._router.segmentArr}function X(){return s._router.params}function K(){return i.location.href.split("#")[1]}function V(t,e){s._router.routeList.push([new RegExp("^"+t.replace(/:[^\/]+/g,"([^\\/]+)")+"$"),e])}function W(t){for(var r=new RegExp("^"+t.replace(/:[^\/]+/g,"([^\\/]+)")+"$"),n=String(r),o=0;o<s._router.routeList.length;++o){var a=e(s._router.routeList[o],2),i=a[0];a[1];if(String(i)===n){s._router.routeList.splice(o,1);break}}}function $(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(s._router.params=r,!s._router.currentRoute||!s._router.currentRoute.onCanDeactivate||s._router.currentRoute.onCanDeactivate(t)){var o=null,a=!0,l=!1,u=void 0;try{for(var c,f=s._router.routeList[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var d=e(c.value,2),h=d[0],v=d[1];if(h.test(t)){if(v.onActivationCheck&&!v.onActivationCheck(t))return v.onActivationFail&&(o=$(v.onActivationFail.route,v.onActivationFail.params,"boolean"!=typeof v.onActivationFail.attachDetector||v.onActivationFail.attachDetector)),void(t=void 0);v.onBeforeRoute&&v.onBeforeRoute();var p=s._destroyNodeMap.get(K());p&&(p.forEach((function(t){t.slOnDestroyFn&&t.slOnDestroyFn(),t.slOnDestroyFn=null})),s._destroyNodeMap.set(K(),[]),s._destroyFuncMap.set(K(),[])),s._router.lastHash=t,i.location.hash=t,B(),s._router.currentRoute=v;var y=document.getElementById(v.root);v.component&&(v.component.slOnDestroy&&s._destroyFuncMap.set(t,[v.component.slOnDestroy.bind(v.component)]),s._router.mountRoute=t,C(y,v.component,n),o=v.component);break}}}catch(t){l=!0,u=t}finally{try{a||null==f.return||f.return()}finally{if(l)throw u}}return s._changeDetector.changeDetectionStrategy===s.CHANGE_STRATEGY_AUTOMATIC&&et(),o}}B();var z=function(t,e,r){return{parent:t,factory:e,before:r&&r.before||null,after:r&&r.after||null,map:Object.create(null)}};function J(t,e){"function"==typeof e&&(e=e());for(var r=[],n=0;n<e.length;++n)r.push(t.factory.bind(this,e[n])());return r}function Q(t,e,r){"function"==typeof e&&(e=e());var n,o,s=Object.create(null),a=t.parent,i=t.after?t.after.nextSibling:a.firstChild;if(e.length||t.before||t.after){for(var l=0;l<e.length;++l)(n=t.map[l])?r.bind(n,this,e[l])():(n=t.factory.bind(this,e[l])(),3===Object.keys(n).length&&void 0!==n.attrs&&void 0!==n.children&&void 0!==n.tagName&&(n=v(n))),s[l]=n,i?n===i.nextSibling?(D(i),O(i),d(i),E(i)):n!==i&&a.insertBefore(n,i):a.appendChild(n),i=n.nextSibling;for(;i!==t.before;)o=i.nextSibling,D(i),O(i),d(i),E(i),i=o}else a.textContent="";t.map=s}s.CHANGE_STRATEGY_AUTOMATIC=100,s.CHANGE_STRATEGY_MANUAL=200,s.CHANGE_DETECTOR_DETACHED=!1,s.CHANGE_DETECTOR_ATTACHED=!0,s._changeStrategies=[s.CHANGE_STRATEGY_AUTOMATIC,s.CHANGE_STRATEGY_MANUAL],s._changeDetector={lastUpdateDate:new Date,changeDetectionStrategy:s.CHANGE_STRATEGY_AUTOMATIC},Object.seal(s._changeDetector),Object.freeze(s._changeStrategies);var Z=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e[t]){var n=e[t];e[t]=function(){if(r&&arguments[0]&&"function"==typeof arguments[0]){var t=arguments[0];arguments[0]=function(){var e=t.apply(this,[].slice.call(arguments));return et(),e}}var e=n.apply(this,[].slice.call(arguments));return et(),e}}},tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?P(t,s._updateMap.get(t)):s._updateMap.forEach((function(t,e){P(e,t)}))},et=function(){s._changeDetector.changeDetectionStrategy===s.CHANGE_STRATEGY_AUTOMATIC&&(new Date-s._changeDetector.lastUpdateDate>17?tt():s._debouncedPerformUpdates(),s._changeDetector.lastUpdateDate=new Date)};function rt(t){s._changeStrategies.forEach((function(e){e===t&&(s._changeDetector.changeDetectionStrategy=t)}))}function nt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;tt(t)}function ot(t){return s._updateMap.has(t)}function st(t){s._updateMap.delete(t)}function at(t){return function(){var e=t.apply(this,[].slice.call(arguments));return et(),e}}s._debouncedPerformUpdates=function(t,e){var r;return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var a=this;clearTimeout(r),r=s.DETACHED_SET_TIMEOUT((function(){return t.apply(a,n)}),17)}}(tt);var it=i.XMLHttpRequest.prototype.send,lt=new Map;function ut(){if(this._onreadystatechange){var t=lt.get(this);if(void 0!==t&&t===this._onreadystatechangecount)return void lt.delete(this);void 0!==t?lt.set(this,t+1):lt.set(this,0);var e=this._onreadystatechange.apply(this,arguments);return et(),lt.delete(this),e}}i.XMLHttpRequest.prototype.send=function(t){return this.onreadystatechange?(this._onreadystatechange=this.onreadystatechange,void 0===this._onreadystatechangecount?this._onreadystatechangecount=0:this._onreadystatechangecount+=4):this._onreadystatechangecount=0,this.onreadystatechange=ut,it.apply(this,arguments)};var ct=i.fetch;i.fetch=function(){var t=ct.apply(this,arguments);return et(),t},Z("setTimeout",i,!0),Z("setInterval",i,!0);