export const Observable=t=>{const n=["pop","push","reverse","shift","unshift","splice","sort","map","filter","fill","copyWithin"],r=n.slice(0,6),e={},i=[];let c=t,s=0;const o=function(t){0===s?(i.forEach(n=>{n(t)}),s++):s=0};return e.subscribe=function(t){return i.push(t),c=new Proxy(c,{set:function(t,n,r){return"length"===n?(t[n]=r,!0):!1===isNaN(n)?(t[n]=r,o(t),!0):void 0}}),n.forEach((function(t){Object.defineProperty(c,t,{writable:!0,value:function(){let n=c;return r.indexOf(t)>-1?Array.prototype[t].apply(n,arguments):n=Array.prototype[t].apply(n,arguments),o(n),n}})})),this},e.clearSubscription=function(t){const n=i.filter(n=>n!==t);return this.clearSubscriptions(),i.concat(n),this},e.clearSubscriptions=function(){return i.splice(0,i.length),this},e.getData=function(){return c},e};export const BehaviorSubject=t=>{const n={},r=[];let e=t;return n.subscribe=function(t){return r.push(t),this},n.clearSubscription=function(t){const n=r.filter(n=>n!==t);return this.clearSubscriptions(),r.concat(n),this},n.clearSubscriptions=function(){return r.splice(0,r.length),this},n.next=function(t){return e=t,r.forEach(t=>{t(e)}),this},n.getData=function(){return e},n};export const Stream=()=>{const t=[],n=[],r={},e=[];let i=0;const c=function(){t.forEach(t=>{let r=n.slice(t.end,i),e=r.length;if(e>0){r=t.fn(r),Array.isArray(r)||(r=[r]),n.splice(t.end,r.length,...r);let i=e-r.length;i&&n.splice(n.length-i,i),t.end=n.length}})},s=function(){e.forEach(t=>{t(n)})};return r.push=function(t){return n.push(t),i++,c(),s(),this},r.subscribe=function(t){return e.push(t),this},r.clearSubscription=function(t){const n=e.filter(n=>n!==t);return this.clearSubscriptions(),e.concat(n),this},r.clearSubscriptions=function(){return e.splice(0,e.length),this},r.transform=function(n){return t.push({fn:n,end:0}),c(),s(),this},r.call=function(t){return t(n),this},r.getData=function(){return JSON.parse(JSON.stringify(n))},r.clearTransformers=function(){return t.splice(0,t.length),this},r.from=function(t){return n.splice(0,n.length),t.forEach(t=>{n.push(t)}),i=n.length,c(),s(),this},r};