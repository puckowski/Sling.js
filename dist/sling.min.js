window.s=function(){};const DETACHED_SET_TIMEOUT=window.setTimeout,DETACHED_SET_INTERVAL=window.setInterval;Object.defineProperty(s,"DETACHED_SET_TIMEOUT",{value:DETACHED_SET_TIMEOUT.bind(window)}),Object.defineProperty(s,"DETACHED_SET_INTERVAL",{value:DETACHED_SET_INTERVAL.bind(window)}),s._state={},s._destroyFuncArr=[],s._updateMap=new Map;const renderElement=({tagName:e,attrs:t,children:n})=>{let o,r=document.createElement(e);for(let[e,n]of Object.entries(t))"function"===(o=typeof n)?r[e]=n:r.setAttribute(e,n);for(let e of n){let t=renderMarkup(e,r);t!==r&&r.appendChild(t)}return r},diffVAttrs=(e,t)=>{let n,o=[];for(let n of e)t[n.name]||o.push(e=>(e.setAttribute(n.name,n.value),e));for(let n of e)n in t||o.push(e=>(e.removeAttribute(n),e));for(let[e,r]of Object.entries(t))"function"===(n=typeof r)?o.push(t=>(t[e]=r,t)):o.push(t=>(t.setAttribute(e,r),t));return e=>{for(let t of o)t(e)}},diffVChildren=(e,t)=>{let n=[];for(let o=0;o<e.length;++o)n.push(diffVDom(e[o],t[o]));let o=[];for(let n of t.slice(e.length))"string"==typeof n?o.push(e=>(e.textContent!==n&&(e.textContent=n),e)):o.push(e=>{let t=renderMarkup(n,e);return t!==e&&e.appendChild(t),e});return e=>{for(let t=0;t<n.length;++t)n[t](e.childNodes[t]);for(let t of o)t(e);return s._changeDetector.changeDetectionStrategy===s.CHANGE_STRATEGY_AUTOMATIC&&_proxyAllEvents(e),e}},diffVDom=(e,t)=>{if(!t)return e=>{e.remove()};if("string"==typeof t)return e.innerText&&e.innerText!==t?e=>{return renderMarkup(t,e)}:e=>void 0;if(t.attrs.slUseExisting)return e=>e;if(t.attrs.slNoChanges){let n=diffVChildren(e.children,t.children);return e=>(n(e),e)}let n=diffVAttrs(e.attributes,t.attrs),o=diffVChildren(e.children,t.children);return e=>(n(e),o(e),e)},renderMarkup=(e,t)=>"string"==typeof e?(t.innerText=e,t):renderElement(e),render=e=>{if(e.slOnInit&&e.slOnInit(),"string"==typeof(e=e.view())){const t=document.createElement("SPAN");return t.innerText=e,t}return renderElement(e)},_mountInternal=(e,t,n)=>{let o=render(t);if(n&&s._updateMap.set(e.id,t),e.replaceWith(o),o.id!==e.id&&console.error('Mounted component root element changed from "'+e.id+'" to "'+o.id+'"'),t.slAfterInit){let e=setInterval(()=>{t.slAfterInit(),_performChangeDetection(),clearInterval(e)},0)}return o};export function version(){return"4.1.1"}export function resolveAll(e){return Promise.all(e.map(e=>e.then(e=>({result:e,status:"fulfilled",error:null}),e=>({result:null,error:e,status:"rejected"}))))}export function setState(e){s._state=e}export function getState(){return s._state}export function textNode(e){return String(e)}export function markup(e,{attrs:t={},children:n=[]}={}){return{tagName:e=e.toUpperCase(),attrs:t,children:n}}export function m(){return markup(arguments[0],arguments[1])}export function mount(e,t,n=!0){let o=document.getElementById(e);if(null!==o)return _mountInternal(o,t,n);console.error('ID "'+e+'" does not exist in DOM.')}export function update(e,t){const n=e;if(!(e=document.getElementById(e)))return void console.warn('Skip update of "'+n+'". ID does not exist in DOM.');let o=t.view.bind(t)();e=diffVDom(e,o)(e)}let origPopState=window.onpopstate;window.onpopstate=function(e){origPopState&&origPopState(e),route(getRoute())},s._router={segmentArr:[],routeMap:new Map,params:null},Object.seal(s._router);const setUrlSegments=()=>{let e=window.location.href.split("#")[1];if(s._router.segmentArr.splice(0,s._router.segmentArr.length),e){e.split("/").forEach(e=>{s._router.segmentArr.push(e)})}};export function getRouteSegments(){return s._router.segmentArr}export function getRouteParams(){return s._router.params}export function getRoute(){return window.location.href.split("#")[1]}export function addRoute(e,t){s._router.routeMap.set(new RegExp("^"+e.replace(/:[^\/]+/g,"([^\\/]+)")+"$"),t)}export function route(e,t={},n=!0){s._router.params=t;let o=null;return s._router.routeMap.forEach((t,r)=>{if(r.test(e)){if(t.authGuard&&!t.authGuard(r))return t.authFail&&(o=route(t.authFail.route,t.authFail.params)),void(e=void 0);s._destroyFuncArr.forEach(e=>{e()}),s._destroyFuncArr=[],window.location.hash=e,setUrlSegments();let a=document.getElementById(t.root);t.component&&(_mountInternal(a,t.component,n),t.component.slOnDestroy&&s._destroyFuncArr.push(t.component.slOnDestroy),o=t.component)}}),s._changeDetector.changeDetectionStrategy===s.CHANGE_STRATEGY_AUTOMATIC&&_performChangeDetection(),o}setUrlSegments(),s.CHANGE_STRATEGY_AUTOMATIC=100,s.CHANGE_STRATEGY_MANUAL=200,s.CHANGE_DETECTOR_DETACHED=!1,s.CHANGE_DETECTOR_ATTACHED=!0,s._changeStrategies=[s.CHANGE_STRATEGY_AUTOMATIC,s.CHANGE_STRATEGY_MANUAL],s._changeDetector={lastUpdateDate:new Date,changeDetectionStrategy:s.CHANGE_STRATEGY_AUTOMATIC},Object.seal(s._changeDetector),Object.freeze(s._changeStrategies);const proxyEventForChangeDetection=(e,t)=>{if(t[e]){let n=t[e];t[e]=function(){let e=n.apply(this,[].slice.call(arguments));return _performChangeDetection(),e}}};function debounce(e,t){let n;return function(...o){const r=this;clearTimeout(n),n=s.DETACHED_SET_TIMEOUT(()=>e.apply(r,o),t)}}const performChangeUpdates=()=>{s._updateMap.forEach((e,t)=>{update(t,e)})},_performChangeDetection=()=>{if(s._changeDetector.changeDetectionStrategy!==s.CHANGE_STRATEGY_AUTOMATIC)return;new Date-s._changeDetector.lastUpdateDate>17?performChangeUpdates():s._debouncedPerformUpdates(),s._changeDetector.lastUpdateDate=new Date};export function setDetectionStrategy(e){s._changeStrategies.forEach(t=>{t===e&&(s._changeDetector.changeDetectionStrategy=e)})}export function detectChanges(){performChangeUpdates()}export function isDetectorAttached(e){return s._updateMap.has(e)}export function detachDetector(e){s._updateMap.delete(e)}s._debouncedPerformUpdates=debounce(performChangeUpdates,17);const _proxyAllEvents=e=>{["setTimeout","setInterval","onafterprint","onbeforeprint","onbeforeunload","onerror","onhashchange","onload","onmessage","onoffline","ononline","onpagehide","onpageshow","onpopstate","onresize","onstorage","onunload","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onsearch","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onwheel","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onscroll","oncopy","oncut","onpaste","onabort","oncanplay","oncanplaythrough","oncuechange","ondurationchange","onemptied","onended","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting","ontoggle"].forEach(t=>{proxyEventForChangeDetection(t,e)})};let xhrSendProxy=window.XMLHttpRequest.prototype.send;function xhrSend(e){return this.onreadystatechange&&(this._onreadystatechange=this.onreadystatechange),this.onreadystatechange=xhrOnReadyStateChangeProxy,xhrSendProxy.apply(this,arguments)}function xhrOnReadyStateChangeProxy(){if(this._onreadystatechange){let e=this._onreadystatechange.apply(this,arguments);return _performChangeDetection(),e}}window.XMLHttpRequest.prototype.send=xhrSend;let fetchProxy=window.fetch;window.fetch=function(){let e=fetchProxy.apply(this,arguments);return _performChangeDetection(),e},_proxyAllEvents(window);