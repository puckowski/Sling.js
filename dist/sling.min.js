new function(e){const t=e.setTimeout;e.setInterval;Sling=s=function(){},s.version="2.0.1",s.changeDetectorParams={CHANGE_STRATEGY_AUTOMATIC:100,CHANGE_STRATEGY_MANUAL:200},Object.seal(s.changeDetectorParams);let n={},o=[],a=new Map,r={segmentArr:[],routeMap:new Map,params:null},l={lastUpdateDate:new Date,changeDetectionStrategy:s.changeDetectorParams.CHANGE_STRATEGY_AUTOMATIC};Object.freeze(r),Object.freeze(l);const c=({tagName:e,attrs:t,children:n})=>{let o,a=document.createElement(e);for(let[e,n]of Object.entries(t))"function"===(o=typeof n)?a[e]=n:a.setAttribute(e,n);for(let e of n){let t=p(e);a.appendChild(t)}return a},i=(e,t)=>{let n=[];(e=Array.from(e)).forEach((e,o)=>{n.push(u(e,t[o]))});let o=[];for(let n of t.slice(e.length))"string"==typeof n?o.push(e=>(e.textContent!==n&&(e.textContent=n),e)):o.push(e=>(e.appendChild(p(n)),e));return e=>{for(let[t,o]of((e,t)=>{let n=[];for(let o=0;o<Math.max(e.length,t.length);++o)n.push([e[o],t[o]]);return n})(n,e.childNodes))t&&t(o);for(let t of o)t(e);return l.changeDetectionStrategy===s.changeDetectorParams.CHANGE_STRATEGY_AUTOMATIC&&T(e),e}},u=(e,t)=>{if(!t)return e=>{e.remove()};if("string"==typeof e||"string"==typeof t)return e!==t?e=>{let n=p(t);return e.replaceWith(n),n}:e=>void 0;let n=((e,t)=>{let n,o=[];for(let[e,a]of Object.entries(t))"function"===(n=typeof a)?o.push(t=>(t[e]=a,t)):o.push(t=>(t.setAttribute(e,a),t));for(let n in e)n in t||o.push(e=>(e.removeAttribute(n),e));return e=>{for(let t of o)t(e)}})(e.attrs,t.attrs),o=i(e.children,t.children);return e=>(n(e),o(e),e)},p=e=>"string"==typeof e?document.createTextNode(e):c(e),h=()=>{let t=e.location.href.split("#")[1];if(r.segmentArr.splice(0,r.segmentArr.length),t){t.split("/").forEach(e=>{r.segmentArr.push(e)})}},d=(e,t)=>{let n=(e=>(e.slOnInit&&e.slOnInit(),"string"==typeof(e=e.view())?document.createTextNode(e):c(e)))(t);if(a.set(e.id,t),e.replaceWith(n),t.slAfterInit){let e=setInterval(()=>{t.slAfterInit(),clearInterval(e)},0)}return n};s.setState=e=>{n=e},s.getState=()=>n,s.textNode=e=>String(e),s.markup=(e,{attrs:t={},children:n=[]}={})=>({tagName:e=e.toUpperCase(),attrs:t,children:n}),s.mount=(e,t)=>{let n=e,o=document.getElementById(e);if(null!==o)return d(o,t);throw"Element ID '"+n+"' is invalid."},s.update=(e,t)=>{e=document.getElementById(e);let n=t.view.bind(t)();e=u(e,n)(e)},s.getRouteSegments=()=>r.segmentArr,s.getRouteParams=()=>r.params,s.getRoute=()=>e.location.href.split("#")[1],s.addRoute=function(e,t){r.routeMap.set(new RegExp("^"+e.replace(/:[^\/]+/g,"([^\\/]+)")+"$"),t)},s.route=function(t,n={}){r.params=n;let a=null;return r.routeMap.forEach((n,r)=>{if(r.test(t)){if(n.authGuard&&!n.authGuard(r))return n.authFail&&(a=s.route(n.authFail.route,n.authFail.params)),void(t=void 0);o.forEach(e=>{e()}),o=[],e.location.hash=t,h();let l=document.getElementById(n.root);n.component&&(d(l,n.component),n.component.slOnDestroy&&o.push(n.component.slOnDestroy),a=n.component)}}),l.changeDetectionStrategy===s.changeDetectorParams.CHANGE_STRATEGY_AUTOMATIC&&A(),a},s.setDetectionStrategy=function(e){Object.entries(s.changeDetectorParams).forEach(t=>{t[1]===e&&(l.changeDetectionStrategy=e)})},h();let g=e.onpopstate;e.onpopstate=function(e){g&&g(e),s.route(s.getRoute())};const f=(e,t)=>{if(t[e]){let n=t[e];t[e]=function(){let e=n.apply(this,[].slice.call(arguments));return A(),e}}};const m=()=>{a.forEach((e,t)=>{s.update(t,e)})},y=function(e,n){let o;return function(...a){const r=this;clearTimeout(o),o=t(()=>e.apply(r,a),n)}}(m,17),A=()=>{if(l.changeDetectionStrategy!==s.changeDetectorParams.CHANGE_STRATEGY_AUTOMATIC)return;new Date-l.lastUpdateDate>17?m():y(),l.lastUpdateDate=new Date},T=e=>{["setTimeout","setInterval","onafterprint","onbeforeprint","onbeforeunload","onerror","onhashchange","onload","onmessage","onoffline","ononline","onpagehide","onpageshow","onpopstate","onresize","onstorage","onunload","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onsearch","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onwheel","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onscroll","oncopy","oncut","onpaste","onabort","oncanplay","oncanplaythrough","oncuechange","ondurationchange","onemptied","onended","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting","ontoggle"].forEach(t=>{f(t,e)})};var E=e.XMLHttpRequest.prototype.send;function E(e){return this.onreadystatechange&&(this._onreadystatechange=this.onreadystatechange),this.onreadystatechange=D,E.apply(this,arguments)}function D(){if(this._onreadystatechange){let e=this._onreadystatechange.apply(this,arguments);return A(),e}}e.XMLHttpRequest.prototype.send=E;const v=e.fetch;e.fetch=function(){let e=v.apply(global,arguments);return A(),e},T(e)}(this);