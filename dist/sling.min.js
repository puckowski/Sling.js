new function(e){const t=e.setTimeout,n=e.setInterval;Sling=s=function(){},s.version="2.0.2",s.pureSetTimeout=t.bind(e),s.pureSetInterval=n.bind(e),s.changeDetectorParams={CHANGE_STRATEGY_AUTOMATIC:100,CHANGE_STRATEGY_MANUAL:200},Object.seal(s.changeDetectorParams);let o={},r=[],a=new Map,l={segmentArr:[],routeMap:new Map,params:null},i={lastUpdateDate:new Date,changeDetectionStrategy:s.changeDetectorParams.CHANGE_STRATEGY_AUTOMATIC};Object.freeze(l),Object.freeze(i);const c=({tagName:e,attrs:t,children:n})=>{let o,r=document.createElement(e);for(let[e,n]of Object.entries(t))"function"===(o=typeof n)?r[e]=n:r.setAttribute(e,n);for(let e of n){let t=h(e);r.appendChild(t)}return r},u=(e,t)=>{let n=[];(e=Array.from(e)).forEach((e,o)=>{n.push(p(e,t[o]))});let o=[];for(let n of t.slice(e.length))"string"==typeof n?o.push(e=>(e.textContent!==n&&(e.textContent=n),e)):o.push(e=>(e.appendChild(h(n)),e));return e=>{for(let[t,o]of((e,t)=>{let n=[];for(let o=0;o<Math.max(e.length,t.length);++o)n.push([e[o],t[o]]);return n})(n,e.childNodes))t&&t(o);for(let t of o)t(e);return i.changeDetectionStrategy===s.changeDetectorParams.CHANGE_STRATEGY_AUTOMATIC&&E(e),e}},p=(e,t)=>{if(!t)return e=>{e.remove()};if("string"==typeof e||"string"==typeof t)return e!==t?e=>{let n=h(t);return e.replaceWith(n),n}:e=>void 0;let n=((e,t)=>{let n,o=[];for(let n of e)t[n.name]||o.push(e=>(e.setAttribute(n.name,""),e));for(let[e,r]of Object.entries(t))"function"===(n=typeof r)?o.push(t=>(t[e]=r,t)):o.push(t=>(t.setAttribute(e,r),t));for(let n in e)n in t||o.push(e=>(e.removeAttribute(n),e));return e=>{for(let t of o)t(e)}})(e.attributes,t.attrs),o=u(e.children,t.children);return e=>(n(e),o(e),e)},h=e=>"string"==typeof e?document.createTextNode(e):c(e),d=()=>{let t=e.location.href.split("#")[1];if(l.segmentArr.splice(0,l.segmentArr.length),t){t.split("/").forEach(e=>{l.segmentArr.push(e)})}},g=(e,t)=>{let n=(e=>(e.slOnInit&&e.slOnInit(),"string"==typeof(e=e.view())?document.createTextNode(e):c(e)))(t);if(a.set(e.id,t),e.replaceWith(n),t.slAfterInit){let e=setInterval(()=>{t.slAfterInit(),clearInterval(e)},0)}return n};s.setState=e=>{o=e},s.getState=()=>o,s.textNode=e=>String(e),s.markup=(e,{attrs:t={},children:n=[]}={})=>({tagName:e=e.toUpperCase(),attrs:t,children:n}),s.mount=(e,t)=>{let n=e,o=document.getElementById(e);if(null!==o)return g(o,t);throw"Element ID '"+n+"' is invalid."},s.update=(e,t)=>{e=document.getElementById(e);let n=t.view.bind(t)();e=p(e,n)(e)},s.getRouteSegments=()=>l.segmentArr,s.getRouteParams=()=>l.params,s.getRoute=()=>e.location.href.split("#")[1],s.addRoute=function(e,t){l.routeMap.set(new RegExp("^"+e.replace(/:[^\/]+/g,"([^\\/]+)")+"$"),t)},s.route=function(t,n={}){l.params=n;let o=null;return l.routeMap.forEach((n,a)=>{if(a.test(t)){if(n.authGuard&&!n.authGuard(a))return n.authFail&&(o=s.route(n.authFail.route,n.authFail.params)),void(t=void 0);r.forEach(e=>{e()}),r=[],e.location.hash=t,d();let l=document.getElementById(n.root);n.component&&(g(l,n.component),n.component.slOnDestroy&&r.push(n.component.slOnDestroy),o=n.component)}}),i.changeDetectionStrategy===s.changeDetectorParams.CHANGE_STRATEGY_AUTOMATIC&&T(),o},s.setDetectionStrategy=function(e){Object.entries(s.changeDetectorParams).forEach(t=>{t[1]===e&&(i.changeDetectionStrategy=e)})},d();let f=e.onpopstate;e.onpopstate=function(e){f&&f(e),s.route(s.getRoute())};const m=(e,t)=>{if(t[e]){let n=t[e];t[e]=function(){let e=n.apply(this,[].slice.call(arguments));return T(),e}}};const y=()=>{a.forEach((e,t)=>{s.update(t,e)})},A=function(e,n){let o;return function(...r){const a=this;clearTimeout(o),o=t(()=>e.apply(a,r),n)}}(y,17),T=()=>{if(i.changeDetectionStrategy!==s.changeDetectorParams.CHANGE_STRATEGY_AUTOMATIC)return;new Date-i.lastUpdateDate>17?y():A(),i.lastUpdateDate=new Date},E=e=>{["setTimeout","setInterval","onafterprint","onbeforeprint","onbeforeunload","onerror","onhashchange","onload","onmessage","onoffline","ononline","onpagehide","onpageshow","onpopstate","onresize","onstorage","onunload","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onsearch","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onwheel","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onscroll","oncopy","oncut","onpaste","onabort","oncanplay","oncanplaythrough","oncuechange","ondurationchange","onemptied","onended","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting","ontoggle"].forEach(t=>{m(t,e)})};var D=e.XMLHttpRequest.prototype.send;function D(e){return this.onreadystatechange&&(this._onreadystatechange=this.onreadystatechange),this.onreadystatechange=b,D.apply(this,arguments)}function b(){if(this._onreadystatechange){let e=this._onreadystatechange.apply(this,arguments);return T(),e}}e.XMLHttpRequest.prototype.send=D;const v=e.fetch;e.fetch=function(){let e=v.apply(global,arguments);return T(),e},E(e)}(this);