export const Observable=t=>{const n=["pop","push","reverse","shift","unshift","splice","sort","map","filter","fill","copyWithin"],r=n.slice(0,6),e={};let i=[],c=t,o=0;const u=function(t){0===o?(i.forEach(n=>{n(t)}),o++):o=0};return e.subscribe=function(t){return i.push(t),c=new Proxy(c,{set:function(t,n,r){return"length"===n?(t[n]=r,!0):!1===isNaN(n)?(t[n]=r,u(t),!0):void 0}}),n.forEach((function(t){Object.defineProperty(c,t,{writable:!0,value:function(){let n=c;return r.indexOf(t)>-1?Array.prototype[t].apply(n,arguments):n=Array.prototype[t].apply(n,arguments),u(n),n}})})),this},e.clearSubscription=function(t){const n=i.filter(n=>n!==t);return this.clearSubscriptions(),i=i.concat(n),this},e.getHasSubscription=function(t){const n=i.find(n=>n===t);return null!=n&&void 0!==n},e.clearSubscriptions=function(){return i.splice(0,i.length),this},e.getData=function(){return c},e};export const BehaviorSubject=t=>{const n={};let r=[],e=t;return n.subscribe=function(t){return r.push(t),this},n.clearSubscription=function(t){const n=r.filter(n=>n!==t);return this.clearSubscriptions(),r=r.concat(n),this},n.getHasSubscription=function(t){const n=r.find(n=>n===t);return null!=n&&void 0!==n},n.clearSubscriptions=function(){return r.splice(0,r.length),this},n.next=function(t){return e=t,r.forEach(t=>{t(e)}),this},n.getData=function(){return e},n};export const Stream=()=>{const t=[],n=[],r={};let e=[],i=0;const c=function(){t.forEach(t=>{let r=n.slice(t.end,i),e=r.length;if(e>0){r=t.fn(r),Array.isArray(r)||(r=[r]),n.splice(t.end,r.length,...r);let i=e-r.length;i&&n.splice(n.length-i,i),t.end=n.length}})},o=function(){e.forEach(t=>{t(n)})};return r.push=function(t){return n.push(t),i++,c(),o(),this},r.subscribe=function(t){return e.push(t),this},r.getHasSubscription=function(t){const n=e.find(n=>n===t);return null!=n&&void 0!==n},r.clearSubscription=function(t){const n=e.filter(n=>n!==t);return this.clearSubscriptions(),e=e.concat(n),this},r.clearSubscriptions=function(){return e.splice(0,e.length),this},r.transform=function(n){return t.push({fn:n,end:0}),c(),o(),this},r.call=function(t){return t(n),this},r.getData=function(){return JSON.parse(JSON.stringify(n))},r.clearTransformers=function(){return t.splice(0,t.length),this},r.from=function(t){return n.splice(0,n.length),t.forEach(t=>{n.push(t)}),i=n.length,c(),o(),this},r};export const FormControl=t=>{const n={},r=[],e=[],i=BehaviorSubject(t);let c=void 0!==t?t:null,o=!0,u=!0;const s=function(){e.splice(0,e.length),u=!0,r&&r.forEach(t=>{const n=t(c);null!=n&&"object"==typeof n&&e.push(n)}),e.length>0&&(u=!1)};return n.getValueChanges=function(){return i},n.setValidators=function(t){r.splice(0,r.length),Array.isArray(t)&&t.forEach(t=>{"function"==typeof t&&r.push(t)}),s()},n.setValue=function(t){c=t,o=!1,s(),i.next(c)},n.setPristine=function(){o=!0},n.getPristine=function(){return o},n.getDirty=function(){return!o},n.getValue=function(){return c},n.getValid=function(){return u},n.getErrors=function(){return e},n.getError=function(t){const n=e.filter(n=>void 0!==n[t]);return n.length>0?n[0]:null},n};