const t="undefined"!=typeof window;var e=t?window:global;t||(e.setTimeout=()=>{},e.setInterval=()=>{},e.location={},e.location.href="",e.fetch=()=>{},e.XMLHttpRequest={},e.XMLHttpRequest.prototype={},e.XMLHttpRequest.prototype.send=()=>{}),e.s=function(){},s._state={},s._destroyFuncMap=new Map,s._updateMap=new Map,s._afterInitArr=[],s._destroyNodeMap=new Map,s._structureForMap=new Map,s._isAnimatingKeyed=null;const n=(t,e)=>{const n=[];let r;for(n.push(t);n.length>0;)if((r=n.shift()).attrs&&(r.attrs.slfor||r.attrs.slfornamed)&&(r.model=e),r.children)for(let t=r.children.length-1;t>=0;--t)n.push(r.children[t])},r=t=>{const e=[];let n,r;for(e.push(t);e.length>0;)if(3!==(n=e.shift()).nodeType&&(n.hasAttribute("slfor")?(r=(r=n.getAttribute("slfor")).split(":")).length>0&&s._structureForMap.delete(r[0]):n.hasAttribute("slfornamed")&&(r=(r=n.getAttribute("slfornamed")).split(":")).length>0&&s._structureForMap.delete(r[0]),n.children))for(let t=n.children.length-1;t>=0;--t)e.push(n.children[t])};export function renderElementWithoutClass(t,e,n){let r,o,a;r=e&&e.slns?document.createElementNS(e.slns,t.toLowerCase()):document.createElement(t);for(let t of Object.keys(e))if("function"===(o=typeof(a=e[t])))r[t]=a,s._changeDetector.changeDetectionStrategy!==s.CHANGE_STRATEGY_AUTOMATIC||a.name.startsWith("bound slDetached")||a.name.startsWith("slDetached")||T(t,r);else if("slnsfor"===t){const t=JSON.parse(e.slnsfor);for(const[e,n]of Object.entries(t))r.setAttributeNS(n.namespace,e,n.value)}else r.setAttribute(t,a);for(let t of n)r.append(t);return r}export function renderElement({tagName:t,attrs:e,children:n},r=!1){let o,a;o=e&&e.slns?document.createElementNS(e.slns,t.toLowerCase()):document.createElement(t);for(let[t,n]of Object.entries(e))if("function"===(a=typeof n))o[t]=n,s._changeDetector.changeDetectionStrategy!==s.CHANGE_STRATEGY_AUTOMATIC||n.name.startsWith("bound slDetached")||n.name.startsWith("slDetached")||T(t,o);else if("slnsfor"===t){const t=JSON.parse(e.slnsfor);for(const[e,n]of Object.entries(t))o.setAttributeNS(n.namespace,e,n.value)}else o.setAttribute(t,n);for(let t of n)"string"==typeof t?o.append(t):t.view?r?l(t,o):i(t,o):o.appendChild(renderElement(t,r));return o}const o=({tagName:t,attrs:e,children:n})=>{let r,a;r=e&&e.slns?document.createElementNS(e.slns,t.toLowerCase()):document.createElement(t);for(let[t,n]of Object.entries(e))if("function"===(a=typeof n))r[t]=n,s._changeDetector.changeDetectionStrategy!==s.CHANGE_STRATEGY_AUTOMATIC||n.name.startsWith("bound slDetached")||n.name.startsWith("slDetached")||T(t,r);else if("slnsfor"===t){const t=JSON.parse(e.slnsfor);for(const[e,n]of Object.entries(t))r.setAttributeNS(n.namespace,e,n.value)}else r.setAttribute(t,n);for(let t of n)"string"==typeof t?r.append(t):t.view?i(t,r):r.appendChild(o(t));return r},a=(t,e)=>{t.slKeyList=[],t.slNamespace={};for(const n in e)t.slNamespace[n]=e[n],t.slKeyList.push(n)},l=(t,e)=>{t=c(t,!0,!0,!0).view;const n=o(t);e.appendChild(n)},i=(t,e,n=!1)=>{Object.getPrototypeOf(t).slDirty=!0;const r=t,l=c(t,!0,!0,!0);t=l.view,l.afterInit&&s._afterInitArr.push(l.afterInit);const i=o(t);u(i,l.destroyIndex,l.onDestroy),d(i),e.appendChild(i),a(i,r),n&&b(i,t,l.model)},u=(t,e,n)=>{t.slOnDestroy=!0,t.slAfterInit=!0,t.slOnInit=!0,t.slOnDestroyIndex=e,t.slOnDestroyFn=n},c=(t,e,r,o=!1,a=null)=>{if(r&&t.slOnInit&&t.slOnInit(),a&&a.slKeyList)for(const e of a.slKeyList)void 0===t[e]?t[e]=a.slNamespace[e]:a.slNamespace[e]=t[e];let l=null;if(e&&t.slOnDestroy){let e=s._destroyFuncMap.get(s._router.mountRoute);e||(e=[]),e.push(t.slOnDestroy.bind(t)),s._destroyFuncMap.set(s._router.mountRoute,e),l=e.length-1}const i=t.view.bind(t)();return n(i,t),{view:i,afterInit:t.slAfterInit?t.slAfterInit.bind(t):null,onDestroy:e&&!o||!t.slOnDestroy?null:t.slOnDestroy.bind(t),onInit:!r&&t.slOnInit?t.slOnInit:null,destroyIndex:l,model:t}},d=t=>{if(t&&null!==t.slOnDestroyIndex&&void 0!==t.slOnDestroyIndex){let e=s._destroyNodeMap.get(s._router.mountRoute);e||(e=[]),e.find(e=>e.slOnDestroyIndex===t.slOnDestroyIndex)||e.push(t),s._destroyNodeMap.set(s._router.mountRoute,e)}},f=t=>{if(t&&t.slOnDestroy){let e=s._destroyFuncMap.get(s._router.mountRoute);e||(e=[]),e.splice(t.slOnDestroyIndex,1),s._destroyFuncMap.set(s._router.mountRoute,e);let n=s._destroyNodeMap.get(s._router.mountRoute);n||(n=[]),n.forEach(e=>{e.slOnDestroyIndex>t.slOnDestroyIndex&&e.slOnDestroyIndex--}),n=n.filter(e=>e.slOnDestroyIndex!==t.slOnDestroyIndex),s._destroyNodeMap.set(s._router.mountRoute,n)}},p=t=>{if(t&&t.children&&t.children.length>0){for(const e of t.children)p(e);t.slOnDestroyFn&&(t.slOnDestroyFn(),t.slOnDestroyFn=null)}else t.slOnDestroyFn&&(t.slOnDestroyFn(),t.slOnDestroyFn=null)},h=(t,e)=>{t.slOnDestroy=!0;let n=s._destroyFuncMap.get(s._router.mountRoute);n||(n=[]),n.push(e),s._destroyFuncMap.set(s._router.mountRoute,n),t.slOnDestroyIndex=n.length-1,t.slOnDestroyFn=e,d(t)},y=(t,e,n)=>{let r;const o=[];for(let t of e){let e=n[t.name];e?e.length===t.nodeValue.length&&e===t.nodeValue&&delete n[t.name]:o.push(t.nodeName)}o.forEach(e=>{t.removeAttribute(e)}),void 0!==n.slref&&(t.slref=t);const a=n.slpreventdefault;let l=!1;for(let[e,o]of Object.entries(n))if("function"===(r=typeof o)){if(void 0!==a){let n=e;n.startsWith("on")&&(n=n.substring(2,n.length));const r=t[e];if(r){(Array.isArray(r)?r:[r]).forEach(e=>{t.removeEventListener(n,e)})}t.addEventListener(n,(function(t){t.preventDefault()})),l=!0}t[e]=o,s._changeDetector.changeDetectionStrategy!==s.CHANGE_STRATEGY_AUTOMATIC||o.name.startsWith("bound slDetached")||o.name.startsWith("slDetached")||T(e,t)}else if("slnsfor"===e){const e=JSON.parse(n.slnsfor);for(const[n,r]of Object.entries(e))t.setAttributeNS(r.namespace,n,r.value)}else t.setAttribute(e,o);l||(void 0!==a?O([t]):e.slpreventdefault&&O([t]))},g=(t,e,n)=>{const l=e.length;let u=0;for(let t=e.length-1;t>=0;--t){let r=null;if(n[t]&&n[t].view){const o=c(n[t],!1,!1,!1,e[t]);n[t]=o.view;const l=Object.getPrototypeOf(o.model);!0!==l.slDirty&&(o.onInit&&e[t].slOnInit&&(e[t].slOnInit=!1),o.afterInit&&e[t].slAfterInit&&(e[t].slAfterInit=!1),o.onDestroy&&e[t].slOnDestroy&&(e[t].slOnDestroy=!1),l.slDirty=!0),o.onInit&&e[t]&&!e[t].slOnInit&&o.onInit.bind(o.model)(),o.afterInit&&e[t]&&!e[t].slAfterInit&&(e[t].slAfterInit=!0,s._afterInitArr.push(o.afterInit)),o.onDestroy&&e[t]&&!e[t].slOnDestroy&&h(n[t],o.onDestroy),a(e[t],o.model),r=o.model}b(e[t],n[t],r),u++}let d=e.length;for(;d>l;)f(e[d-1]),p(e[d-1]),r(e[e.length-1]),_(e[d-1]),d--;for(let e of n.slice(l)){if("string"==typeof e)t.childNodes[u]?t.childNodes[u].textContent!==e&&(t.childNodes[u].textContent=e):t.append(e);else if("string"==typeof e)t.append(e);else if(e.view)i(e,t,!0);else{const n=o(e);t.appendChild(n),b(n,e)}u++}for(d=e.length;d>n.length;)f(e[d-1]),p(e[d-1]),r(e[d-1]),_(e[d-1]),d--},_=t=>{const e=s._router.count;if(void 0===t.slanimatedestroytarget||""===t.slanimatedestroytarget||t.slAnimateDestroy||void 0===t.attributes.slanimatedestroy||""===t.getAttribute("slanimatedestroy"))if(3===t.nodeType||void 0===t.attributes.slanimatedestroy||""===t.getAttribute("slanimatedestroy")||t.slAnimateDestroy)t.slAnimateDestroy||(s._router.currentRoute&&t.id!==s._router.currentRoute.root?(t.remove(),s._updateMap.delete(t.id)):e===s._router.count&&(t.remove(),s._updateMap.delete(t.id)));else{const n=t.onanimationend,r=t.onanimationstart,o=t.getAttribute("slanimatedestroy");t.onanimationstart=function(e){t.slAnimationName=e.animationName},t.onanimationend=function(o){if(!t.slAnimationName||t.slAnimationName!==o.animationName)return;let a=void 0;return n&&(a=n.apply(this,[].slice.call(arguments))),s._router.currentRoute&&t.id!==s._router.currentRoute.root?(t.remove(),s._updateMap.delete(t.id)):e===s._router.count&&(t.remove(),s._updateMap.delete(t.id)),t.slAnimationName=null,t.onanimationend=n,t.onanimationstart=r,t.slAnimateDestroy=!1,a},t.classList.add(o),t.slAnimateDestroy=!0}else{const n=t.slanimatedestroytarget;if("function"==typeof n){const r=n(t);if(r){const n=r.getAttribute("slanimatedestroy"),o=r.onanimationend,a=r.onanimationstart;r.onanimationstart=function(t){r.slAnimationName=t.animationName},r.onanimationend=function(l){if(!r.slAnimationName||r.slAnimationName!==l.animationName)return;let i=void 0;return o&&(i=o.apply(this,[].slice.call(arguments))),r.classList.remove(n),s._isAnimatingKeyed=null,s._router.currentRoute.animateDestroy?(s._router.currentRoute.animateDestroy=!1,t.setAttribute("style","opacity: 0;"),r.onanimationend=null,r.onanimationstart=null):(s._router.currentRoute&&t.id!==s._router.currentRoute.root?(t.remove(),s._updateMap.delete(t.id)):e===s._router.count&&(t.remove(),s._updateMap.delete(t.id)),r.onanimationend=o,r.onanimationstart=a),r.slAnimationName=null,t.slAnimateDestroy=!1,delete t.slanimatedestroytarget,detectChanges(),i},s._isAnimatingKeyed=r,r.classList.add(n),t.slAnimateDestroy=!0}else s._router.currentRoute&&t.id!==s._router.currentRoute.root?(t.remove(),s._updateMap.delete(t.id)):e===s._router.count&&(t.remove(),s._updateMap.delete(t.id))}else s._router.currentRoute&&t.id!==s._router.currentRoute.root?(t.remove(),s._updateMap.delete(t.id)):e===s._router.count&&(t.remove(),s._updateMap.delete(t.id))}},A=t=>t&&t!==Object.prototype&&Object.getOwnPropertyNames(t).filter(e=>((t,e)=>(Object.getOwnPropertyDescriptor(t,e)||{}).get)(t,e)||((t,e)=>"function"==typeof t[e])(t,e)).concat(A(Object.getPrototypeOf(t))||[]),D=t=>(t=>Array.from(new Set(A(t))))(t).filter(t=>"constructor"!==t&&!~t.indexOf("__")),O=t=>{for(let e=0;e<t.length;e++){const n=t[e];if(null!==n.getAttribute("slpreventdefault"))for(const t in n)if(t.startsWith("on")){let e=t.substring(2,t.length);const r=n[t];if(r){(Array.isArray(r)?r:[r]).forEach(t=>{n.removeEventListener(e,t)})}n.addEventListener(e,(function(t){t.preventDefault()}))}}},b=(t,e,n=null)=>{if(null!==s._isAnimatingKeyed)for(let[e,n]of s._updateMap){const n=document.getElementById(e);if(n.contains(s._isAnimatingKeyed)&&n.contains(t))return t}if(e&&e.view){const n=c(e,!1,!1,!1,t);e=n.view;const r=Object.getPrototypeOf(n.model);!0!==r.slDirty&&(n.onInit&&t.slOnInit&&(t.slOnInit=!1),n.afterInit&&t.slAfterInit&&(t.slAfterInit=!1),n.onDestroy&&t.slOnDestroy&&(t.slOnDestroy=!1),r.slDirty=!0),n.onInit&&t&&!t.slOnInit&&n.onInit.bind(n.model)(),n.afterInit&&t&&!t.slAfterInit&&(t.slAfterInit=!0,s._afterInitArr.push(n.afterInit)),n.onDestroy&&t&&!t.slOnDestroy&&h(t,n.onDestroy)}if(!e)return t&&(f(t),p(t),r(t),_(t)),t;if(t&&(t.tagName||"").toLowerCase()!==((e?e.tagName:void 0)||"").toLowerCase()){if(!e.tagName)return f(t),p(t),t.replaceWith(e),t=e;{let n;n=e.attrs&&e.attrs.slns?document.createElementNS(e.attrs.slns,e.tagName.toLowerCase()):document.createElement(e.tagName),t.parentNode.insertBefore(n,t),f(t),p(t),r(t),_(t),t=n}}if("string"==typeof e)return t.textContent!==e&&(t.textContent=e),t;switch(e.attrs.sldirective){case"useexisting":return t;case"onlychildren":return g(t,t.childNodes,e.children),t;case"onlyself":return y(t,t.attributes,e.attrs),t;case"trustchildren":{y(t,t.attributes,e.attrs);let n="";e.children.forEach(t=>{n+=t}),t.innerHTML!==n&&(t.innerHTML=n);const r=t.querySelectorAll("[slpreventdefault]");return r.length>0&&O(Array.from(r)),t}}if(e.attrs.slfor){const n=e.attrs.slfor.split(":");if(n.length>=4){if(!s._structureForMap.has(n[0])){const r=R(t,e.model[n[2]]);if(s._structureForMap.set(n[0],r),t.children.length>0){let e=Object.create(null);for(let n=0;n<t.children.length;++n)e[n]=t.children[n];r.map=e}}const r=s._structureForMap.get(n[0]);M.bind(e.model,r,e.model[n[1]],e.model[n[3]])()}return y(t,t.attributes,e.attrs),t}if(e.attrs.slfornamed){const n=e.attrs.slfornamed.split(":");if(n.length>=4){let r,o,a,l;for(let t of Object.keys(e.model))(l=e.model[t]).slfor===n[2]?r=l:l.slfor===n[1]?a=l:l.slfor===n[3]&&(o=l);for(let t of D(e.model))(l=e.model[t]).slfor===n[2]?r=l:l.slfor===n[1]?a=l:l.slfor===n[3]&&(o=l);if(a=a.bind(e.model),!s._structureForMap.has(n[0])){const e=R(t,r);if(s._structureForMap.set(n[0],e),t.children.length>0){let n=Object.create(null);for(let e=0;e<t.children.length;++e)n[e]=t.children[e];e.map=n}}const i=s._structureForMap.get(n[0]);M.bind(e.model,i,a,o)()}return y(t,t.attributes,e.attrs),t}return y(t,t.attributes,e.attrs),g(t,t.childNodes,e.children),t},v=(t,e,r)=>{s._afterInitArr=[],e.slOnInit&&e.slOnInit();let o=e.view.bind(e)();if(n(o,e),o.view&&(o=o.view.bind(e)(),n(o,e)),!o.attrs||t&&t.id!==o.attrs.id){const e=o.attrs?o.attrs.id:"null";console.error("Mounted component root element changed from "+t.id+" to "+e)}t=b(t,o,e),r&&s._updateMap.set(t.id,e),e.slOnDestroy&&h(t,e.slOnDestroy.bind(e));let a=t.querySelectorAll("[slref]");void 0!==t.slref&&(a=Array.from(a)).push(t);for(let t=0;t<a.length;++t){e[a[t].getAttribute("slref")]=a[t].slref}return e.slAfterInit&&(e.slAfterInit(),C()),s._afterInitArr.forEach(t=>{t()}),t};export function version(){return"20.3.0"}export function resolveAll(t){return Promise.all(t.map(t=>t.then(t=>({result:t,status:"fulfilled",error:null}),t=>({result:null,error:t,status:"rejected"}))))}export function setState(t){s._state=t}export function getState(){return s._state}export function textNode(t){return String(t)}export function markup(t,{attrs:e={},children:n=[]}={}){return{tagName:t=t.toUpperCase(),attrs:e,children:n}}export function m(){return 3===arguments.length&&"string"==typeof arguments[0]&&"object"==typeof arguments[1]&&Array.isArray(arguments[2])?markup(arguments[0],{attrs:arguments[1],children:arguments[2]}):markup(arguments[0],arguments[1])}export function mount(t,e,n=!0){s._router.mountRoute=t;let r=document.getElementById(t);if(null!==r)return v(r,e,n);console.error("ID "+t+" does not exist in DOM.")}export function update(t,e){const r=t;if(t=document.getElementById(t),s._afterInitArr=[],t){let r=e.view.bind(e)();n(r,e),t=b(t,r,e)}else console.error("ID "+r+" not mounted in DOM; attachDetector likely needs to be called.");let o=t.querySelectorAll("[slref]");void 0!==t.slref&&(o=Array.from(o)).push(t);for(let t=0;t<o.length;++t){e[o[t].getAttribute("slref")]=o[t].slref}s._afterInitArr.forEach(t=>{t()})}let I=e.onpopstate;e.onpopstate=function(t){switch(s._router.strategy){case"#":e.location.hash&&s._router.lastHash!==e.location.hash.substring(2)&&(I&&I(t),route(getRoute()));break;case"?":e.location.search&&s._router.lastHash!==e.location.search.substring(2)&&(I&&I(t),route(getRoute()));break;case"":e.location.pathname&&s._router.lastHash!==e.location.pathname.substring(1)&&(I&&I(t),route(getRoute()))}},s._router={segmentArr:[],routeList:[],params:null,lastHash:!1,currentRoute:null,mountRoute:"",strategy:"#",count:0},Object.seal(s._router);const E=()=>{switch(s._router.strategy){case"#":{let t=e.location.href.split("#/")[1];if(t){let e=t.split("/");e.forEach((t,e)=>{s._router.segmentArr[e]=t}),s._router.segmentArr.splice(e.length,s._router.segmentArr.length)}else s._router.segmentArr.splice(0,s._router.segmentArr.length);break}case"?":{let t=e.location.href.split("?/")[1];if(t){let e=t.split("/");e.forEach((t,e)=>{s._router.segmentArr[e]=t}),s._router.segmentArr.splice(e.length,s._router.segmentArr.length)}else s._router.segmentArr.splice(0,s._router.segmentArr.length);break}case"":{let t=e.location.pathname;if(t){let e=(t=t.replace("/","")).split("/");e.forEach((t,e)=>{s._router.segmentArr[e]=t}),s._router.segmentArr.splice(e.length,s._router.segmentArr.length)}else s._router.segmentArr.splice(0,s._router.segmentArr.length);break}}};export function setRouteStrategy(t){new Set(["#","?",""]).has(t)&&(s._router.strategy=t)}export function getRouteQueryVariables(){const t=e.location.search.substring(2).split("&"),n=[];for(var r=0;r<t.length;r++){const e=t[r].split("=");n.push({var:decodeURIComponent(e[0]),value:decodeURIComponent(e[1])})}return n}export function getRouteSegments(){return s._router.segmentArr}export function getRouteParams(){return s._router.params}export function getRoute(){switch(s._router.strategy){case"#":return e.location.href.split("#/")[1];case"?":return e.location.href.split("?/")[1];case"":{let t=e.location.pathname;return t&&(t=t.replace("/","")),t}}}export function addRoute(t,e){s._router.routeList.push([new RegExp("^"+t.replace(/:[^\/]+/g,"([^\\/]+)")+"$"),e])}export function removeRoute(t){const e=new RegExp("^"+t.replace(/:[^\/]+/g,"([^\\/]+)")+"$"),n=String(e);for(let t=0;t<s._router.routeList.length;++t){const[e,r]=s._router.routeList[t];if(String(e)===n){s._router.routeList.splice(t,1);break}}}export function route(t,n={},o=!0){if(s._router.params=n,s._router.currentRoute&&s._router.currentRoute.onCanDeactivate&&!s._router.currentRoute.onCanDeactivate(t))return;let a=null;for(let[n,l]of s._router.routeList)if(n.test(t)){if(l.onActivationCheck&&!l.onActivationCheck(t))return l.onActivationFail&&(a=route(l.onActivationFail.route,l.onActivationFail.params,"boolean"!=typeof l.onActivationFail.attachDetector||l.onActivationFail.attachDetector)),void(t=void 0);l.onBeforeRoute&&l.onBeforeRoute();const n=s._destroyNodeMap.get(getRoute());n&&(n.forEach(t=>{t.slOnDestroyFn&&t.slOnDestroyFn(),t.slOnDestroyFn=null}),s._destroyNodeMap.set(getRoute(),[]),s._destroyFuncMap.set(getRoute(),[])),s._router.lastHash=t;const i=e.pageYOffset;switch(s._router.strategy){case"#":e.history.pushState(null,document.title,"#/"+t);break;case"?":{let n=e.location.href;const r=e.location.pathname;n=n.substring(0,n.indexOf(r)),n+="/?/"+t,e.history.pushState(null,document.title,n);break}case"":{let n=e.location.href;const r=e.location.pathname;n=n.substring(0,n.indexOf(r)),n+="/"+t,e.history.pushState(null,document.title,n);break}}e.scrollTo(0,i);let u=document.getElementById(l.root);if(s._router.currentRoute&&void 0!==s._router.currentRoute.animateDestroy&&(s._router.currentRoute.animateDestroy=!0),s._router.currentRoute&&s._router.currentRoute.animateDestroy){let t=s._router.currentRoute.root;t=document.getElementById(t),s._router.currentRoute=l,f(t),p(t),r(t),_(t),E()}else E(),s._router.currentRoute=l;s._router.count++,l.component&&(l.component.slOnDestroy&&s._destroyFuncMap.set(t,[l.component.slOnDestroy.bind(l.component)]),s._router.mountRoute=t,v(u,l.component,o),a=l.component);break}return s._changeDetector.changeDetectionStrategy===s.CHANGE_STRATEGY_AUTOMATIC&&C(),a}E();const R=(t,e,n)=>({parent:t,factory:e,map:Object.create(null)});function M(t,e,n){"function"==typeof e&&(e=e());const s=Object.create(null),a=t.parent;let l,i,u=a.firstChild;if(e.length){for(let r=0;r<e.length;++r)(l=t.map[r])?n.bind(l,this,e[r])():void 0!==(l=t.factory.bind(this,e[r])()).attrs&&(l=o(l)),s[r]=l,u||a.appendChild(l),u=l.nextSibling;for(;null!==u;)i=u.nextSibling,f(u),p(u),r(u),_(u),u=i}else a.textContent="";t.map=s;const c=t.parent.querySelectorAll("[slpreventdefault]");c.length>0&&(O([t.parent]),O(Array.from(c)))}s.CHANGE_STRATEGY_AUTOMATIC=100,s.CHANGE_STRATEGY_MANUAL=200,s.CHANGE_DETECTOR_DETACHED=!1,s.CHANGE_DETECTOR_ATTACHED=!0,s._changeStrategies=[s.CHANGE_STRATEGY_AUTOMATIC,s.CHANGE_STRATEGY_MANUAL],s._changeDetector={lastUpdateDate:new Date,changeDetectionStrategy:s.CHANGE_STRATEGY_AUTOMATIC},Object.seal(s._changeDetector),Object.freeze(s._changeStrategies);const T=(t,e)=>{if(e[t]){let n=e[t];e[t]=function(){let t=n.apply(this,[].slice.call(arguments));return C(),t}}};const N=(t=null)=>{t?update(t,s._updateMap.get(t)):s._updateMap.forEach((t,e)=>{update(e,t)})},C=()=>{if(s._changeDetector.changeDetectionStrategy!==s.CHANGE_STRATEGY_AUTOMATIC)return;new Date-s._changeDetector.lastUpdateDate>6?N():s._debouncedPerformUpdates(),s._changeDetector.lastUpdateDate=new Date};export function setDetectionStrategy(t){s._changeStrategies.forEach(e=>{e===t&&(s._changeDetector.changeDetectionStrategy=t)})}export function detectChanges(t=null){N(t)}export function isDetectorAttached(t){return s._updateMap.has(t)}export function detachDetector(t){s._updateMap.delete(t)}const S=Promise.prototype.then;export function enableDetectOnThen(){Promise.prototype.then=function(t,e){return S.call(this,e=>(C(),"function"==typeof t&&t instanceof Function?t(e):t),e)}}export function wrapWithChangeDetector(t,e){return function(){e&&e.slpreventdefault&&arguments.length>0&&"function"==typeof arguments[0].preventDefault&&arguments[0].preventDefault();let n=t.apply(this,[].slice.call(arguments));return C(),n}}s._debouncedPerformUpdates=function(t,e){let n;return function(...r){const o=this;clearTimeout(n),n=s.DETACHED_SET_TIMEOUT(()=>t.apply(o,r),e)}}(N,17);let x=e.XMLHttpRequest.prototype.send,w=new Map;function F(){if(this._onreadystatechange){let t=w.get(this);if(void 0!==t&&t===this._onreadystatechangecount)return void w.delete(this);void 0!==t?w.set(this,t+1):w.set(this,0);let e=this._onreadystatechange.apply(this,arguments);return C(),w.delete(this),e}}e.XMLHttpRequest.prototype.send=function(t){return this.onreadystatechange?(this._onreadystatechange=this.onreadystatechange,void 0===this._onreadystatechangecount?this._onreadystatechangecount=0:this._onreadystatechangecount+=4):this._onreadystatechangecount=0,this.onreadystatechange=F,x.apply(this,arguments)};let L=e.fetch;e.fetch=function(){let t=L.apply(this,arguments);return C(),t};const H=e.setTimeout;e.setTimeout=function(t=!0){let e;if(arguments.length>2){const n=[].slice.call(arguments,1);e=H.apply(this,n),t&&C()}else{const t=[].slice.call(arguments);e=H.apply(this,t),C()}return e};const j=e.setInterval;e.setInterval=function(t=!0){let e;if(arguments.length>2){const n=[].slice.call(arguments,1);e=j.apply(this,n),t&&C()}else{const t=[].slice.call(arguments),n=t[0];t[0]=()=>{n(),C()},e=j.apply(this,t),C()}return e};const G=e.setTimeout,U=e.setInterval;Object.defineProperty(s,"DETACHED_SET_TIMEOUT",{value:G.bind(e,!1)}),Object.defineProperty(s,"DETACHED_SET_INTERVAL",{value:U.bind(e,!1)});